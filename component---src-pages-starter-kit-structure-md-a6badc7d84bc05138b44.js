"use strict";(self.webpackChunkcommerce_extensibility=self.webpackChunkcommerce_extensibility||[]).push([[81],{58315:function(e,t,n){n.r(t),n.d(t,{_frontmatter:function(){return m},default:function(){return c}});var i=n(58168),r=n(80045),a=(n(88763),n(15680)),o=n(83407);const d=["components"],m={},l={_frontmatter:m},s=o.A;function c(e){let{components:t}=e,n=(0,r.A)(e,d);return(0,a.mdx)(s,(0,i.A)({},l,n,{components:t,mdxType:"MDXLayout"}),(0,a.mdx)("h1",{id:"starter-kit-structure"},"Starter kit structure"),(0,a.mdx)("p",null,"The Adobe Commerce integration starter kit provides boilerplate code to synchronize the following entities across systems:"),(0,a.mdx)("ul",null,(0,a.mdx)("li",{parentName:"ul"},"Customer"),(0,a.mdx)("li",{parentName:"ul"},"Customer Group"),(0,a.mdx)("li",{parentName:"ul"},"Order"),(0,a.mdx)("li",{parentName:"ul"},"Product"),(0,a.mdx)("li",{parentName:"ul"},"Shipment"),(0,a.mdx)("li",{parentName:"ul"},"Stock")),(0,a.mdx)("p",null,"By default, object synchronization is bi-directional. Changes in Commerce are propagated to the external backoffice application and vice versa."),(0,a.mdx)("p",null,"The source code follows the ",(0,a.mdx)("a",{parentName:"p",href:"https://developer.adobe.com/app-builder/docs/guides/extensions/extension_migration_guide/#old-file-structure"},"file structure")," of a typical App Builder application. Most importantly, the ",(0,a.mdx)("inlineCode",{parentName:"p"},"actions")," directory contains the source code for all the serverless actions."),(0,a.mdx)("p",null,"The following diagram shows the directory structure of the starter kit project:"),(0,a.mdx)("pre",null,(0,a.mdx)("code",{parentName:"pre",className:"language-tree"},"|__ root\n|   |__ actions\n|   |   |__ <entity>\n|   |   |   |__ commerce\n|   |   |   |   |__ consumer\n|   |   |   |   |__ <action>\n|   |   |   |__ external\n|   |   |   |   |__ consumer\n|   |   |   |   |__ <action>\n|   |   |__ ingestion\n|   |   |   |__ webhook\n|   |   |__ webhook\n|   |   |   |__ <action>\n|   |__ scripts\n|   |   |__ commerce-event-subscribe\n|   |   |__ onboarding\n|   |__ test\n|   |__ utils\n")),(0,a.mdx)("p",null,"The most important directories and files are described below."),(0,a.mdx)("h3",{id:"actions-directory"},(0,a.mdx)("inlineCode",{parentName:"h3"},"actions")," directory"),(0,a.mdx)("p",null,"The ",(0,a.mdx)("inlineCode",{parentName:"p"},"actions")," directory has the following subdirectories:"),(0,a.mdx)("ul",null,(0,a.mdx)("li",{parentName:"ul"},(0,a.mdx)("inlineCode",{parentName:"li"},"ingestion")," - contains the source code for an alternative events ingestion endpoint."),(0,a.mdx)("li",{parentName:"ul"},(0,a.mdx)("inlineCode",{parentName:"li"},"webhook")," - contains the source for synchronous webhooks that can be called from Commerce."),(0,a.mdx)("li",{parentName:"ul"},"Separate directories for each entity to be synchronized, including ",(0,a.mdx)("inlineCode",{parentName:"li"},"customer"),", ",(0,a.mdx)("inlineCode",{parentName:"li"},"order"),", and ",(0,a.mdx)("inlineCode",{parentName:"li"},"product"),".")),(0,a.mdx)("p",null,"Each entity directory has ",(0,a.mdx)("inlineCode",{parentName:"p"},"commerce")," and ",(0,a.mdx)("inlineCode",{parentName:"p"},"external")," subdirectories. The ",(0,a.mdx)("inlineCode",{parentName:"p"},"commerce")," directory contains the runtime actions responsible for handling incoming events from Commerce and synchronizing the data with the 3rd-party external system. The ",(0,a.mdx)("inlineCode",{parentName:"p"},"external")," directory defines the runtime actions that handle incoming events from the external system and updates entities in Commerce."),(0,a.mdx)("p",null,"The contents of the ",(0,a.mdx)("inlineCode",{parentName:"p"},"commerce")," and ",(0,a.mdx)("inlineCode",{parentName:"p"},"external")," directories are similar. Each contains"),(0,a.mdx)("ul",null,(0,a.mdx)("li",{parentName:"ul"},"A ",(0,a.mdx)("inlineCode",{parentName:"li"},"consumer")," directory. This directory contains the code for the runtime action that routes incoming events to the action responsible for handling each event."),(0,a.mdx)("li",{parentName:"ul"},"One or more directories that are named after an action, such as ",(0,a.mdx)("inlineCode",{parentName:"li"},"created"),", ",(0,a.mdx)("inlineCode",{parentName:"li"},"deleted"),", and other actions that are appropriate for the entity. Each of these directories contains the code for the runtime action responsible for handling one particular event."),(0,a.mdx)("li",{parentName:"ul"},"An ",(0,a.mdx)("inlineCode",{parentName:"li"},"actions.config.yaml")," file. This file declares the runtime actions responsible for handling the events for an entity originating in Commerce or the external system.")),(0,a.mdx)("p",null,"Individual directories that define actions contain the following files:"),(0,a.mdx)("table",null,(0,a.mdx)("thead",{parentName:"table"},(0,a.mdx)("tr",{parentName:"thead"},(0,a.mdx)("th",{parentName:"tr",align:null},"File"),(0,a.mdx)("th",{parentName:"tr",align:null},"Purpose"))),(0,a.mdx)("tbody",{parentName:"table"},(0,a.mdx)("tr",{parentName:"tbody"},(0,a.mdx)("td",{parentName:"tr",align:null},(0,a.mdx)("inlineCode",{parentName:"td"},"index.js")),(0,a.mdx)("td",{parentName:"tr",align:null},"Contains the main method that gets invoked when handling an event. It is responsible for coordinating the different activities involved in that handling, such as validating the incoming payload, transforming the payload to the target API, and interacting with the target API.")),(0,a.mdx)("tr",{parentName:"tbody"},(0,a.mdx)("td",{parentName:"tr",align:null},(0,a.mdx)("inlineCode",{parentName:"td"},"pre.js")," and ",(0,a.mdx)("inlineCode",{parentName:"td"},"post.js")),(0,a.mdx)("td",{parentName:"tr",align:null},"Provide convenient extension points to introduce custom business logic before and after interacting with the target API.")),(0,a.mdx)("tr",{parentName:"tbody"},(0,a.mdx)("td",{parentName:"tr",align:null},(0,a.mdx)("inlineCode",{parentName:"td"},"sender.js")),(0,a.mdx)("td",{parentName:"tr",align:null},"Implements the logic to interact with the target API so that the changes are propagated. For actions in the ",(0,a.mdx)("inlineCode",{parentName:"td"},"external")," directory, Commerce APIs are the target. Actions in the ",(0,a.mdx)("inlineCode",{parentName:"td"},"commerce")," directory target external APIs.")),(0,a.mdx)("tr",{parentName:"tbody"},(0,a.mdx)("td",{parentName:"tr",align:null},(0,a.mdx)("inlineCode",{parentName:"td"},"schema.json")),(0,a.mdx)("td",{parentName:"tr",align:null},"(",(0,a.mdx)("inlineCode",{parentName:"td"},"external")," directories only) Defines the schema to be validated against the incoming event payload.")),(0,a.mdx)("tr",{parentName:"tbody"},(0,a.mdx)("td",{parentName:"tr",align:null},(0,a.mdx)("inlineCode",{parentName:"td"},"transformer.js")),(0,a.mdx)("td",{parentName:"tr",align:null},"Implements the logic to transform the incoming event payload to make it suitable for the target API being called to propagate the changes.")),(0,a.mdx)("tr",{parentName:"tbody"},(0,a.mdx)("td",{parentName:"tr",align:null},(0,a.mdx)("inlineCode",{parentName:"td"},"validator.js")),(0,a.mdx)("td",{parentName:"tr",align:null},"Implements the logic to validate the incoming event payload.")))),(0,a.mdx)("h3",{id:"scriptsonboarding-directory"},(0,a.mdx)("inlineCode",{parentName:"h3"},"scripts/onboarding")," directory"),(0,a.mdx)("p",null,"The ",(0,a.mdx)("inlineCode",{parentName:"p"},"onboarding")," directory contains the scripting needed to install and set up the starter kit. The ",(0,a.mdx)("inlineCode",{parentName:"p"},"scripts/onboarding/config/starter-kit-registrations.json")," configuration file creates all the registrations for all entities that are present in the repo's ",(0,a.mdx)("inlineCode",{parentName:"p"},"app.config.yaml")," file. You can edit this file to remove any unnecessary Commerce or back office registrations. ",(0,a.mdx)("a",{parentName:"p",href:"./create-integration.md#onboarding"},"Onboarding")," describes the installation process."),(0,a.mdx)("h3",{id:"scriptscommerce-event-subscribe-directory"},(0,a.mdx)("inlineCode",{parentName:"h3"},"scripts/commerce-event-subscribe")," directory"),(0,a.mdx)("p",null,"The ",(0,a.mdx)("inlineCode",{parentName:"p"},"commerce-event-subscribe")," directory contains the script to subscribe the Commerce event provider, which was created during onboarding, to the Commerce events. The ",(0,a.mdx)("inlineCode",{parentName:"p"},"scripts/onboarding/config/starter-kit-registrations.json")," configuration file contains all the Commerce events you want subscribe to. Edit this file to add, remove, or modify the events necessary for your project. ",(0,a.mdx)("a",{parentName:"p",href:"./create-integration.md#onboarding"},"Onboarding")," describes the installation process."),(0,a.mdx)("h3",{id:"test-directory"},(0,a.mdx)("inlineCode",{parentName:"h3"},"test")," directory"),(0,a.mdx)("p",null,"The starter kit provides unit tests for most of the included runtime actions. These tests are in the ",(0,a.mdx)("inlineCode",{parentName:"p"},"test/actions")," directory. You can also find unit tests for the onboarding script in the ",(0,a.mdx)("inlineCode",{parentName:"p"},"test/onboarding")," directory."),(0,a.mdx)("p",null,(0,a.mdx)("a",{parentName:"p",href:"https://developer.adobe.com/app-builder/docs/resources/barcode-reader/test/"},"Testing a Serverless Action")," provides details about unit testing."))}c.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-starter-kit-structure-md-a6badc7d84bc05138b44.js.map