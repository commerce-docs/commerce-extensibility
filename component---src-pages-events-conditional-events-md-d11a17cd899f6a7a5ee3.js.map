{"version":3,"file":"component---src-pages-events-conditional-events-md-d11a17cd899f6a7a5ee3.js","mappings":"wSAMaA,EAAe,CAAC,EACvBC,EAAc,CAClBD,gBAEIE,EAAYC,EAAAA,EACH,SAASC,EAAW,GAGhC,IAHgC,WACjCC,GAED,EADIC,GAAK,YAER,OAAO,SAACJ,GAAS,UAAKD,EAAiBK,EAAK,CAAED,WAAYA,EAAYE,QAAQ,eAG5E,eACE,GAAM,6BACH,8BACL,kBAAK,2oBACL,kBAAK,4iBACL,kBAAK,8DACL,oBACE,eAAIC,WAAW,OACb,cAAGA,WAAW,MAAO,8CAEvB,eAAIA,WAAW,OACb,cAAGA,WAAW,MAAO,uGAEvB,eAAIA,WAAW,OACb,cAAGA,WAAW,MAAO,yBAGzB,kBAAK,sCACL,oBACE,eAAIA,WAAW,OACb,cAAGA,WAAW,MAAO,kDAEvB,eAAIA,WAAW,OACb,cAAGA,WAAW,MAAO,kJACrB,cAAGA,WAAW,MAAO,+CACrB,kBAAOA,WAAW,OAChB,kBAAOA,WAAW,UAChB,eAAIA,WAAW,UACb,eAAIA,WAAW,KACb,MAAS,MACN,aACL,eAAIA,WAAW,KACb,MAAS,MACN,kBAGT,kBAAOA,WAAW,UAChB,eAAIA,WAAW,UACb,eAAIA,WAAW,KACb,MAAS,OACR,uBAAYA,WAAW,MAAO,iBACjC,eAAIA,WAAW,KACb,MAAS,MACN,mJAEP,eAAIA,WAAW,UACb,eAAIA,WAAW,KACb,MAAS,OACR,uBAAYA,WAAW,MAAO,cACjC,eAAIA,WAAW,KACb,MAAS,MACN,mHAEP,eAAIA,WAAW,UACb,eAAIA,WAAW,KACb,MAAS,OACR,uBAAYA,WAAW,MAAO,WACjC,eAAIA,WAAW,KACb,MAAS,MACN,8FAA4F,uBAAYA,WAAW,MAAO,KAAkB,mBAAiB,uBAAYA,WAAW,MAAO,QAAqB,SAAO,uBAAYA,WAAW,MAAO,KAAkB,mBAAiB,uBAAYA,WAAW,MAAO,SAAsB,OAEnV,eAAIA,WAAW,UACb,eAAIA,WAAW,KACb,MAAS,OACR,uBAAYA,WAAW,MAAO,WACjC,eAAIA,WAAW,KACb,MAAS,MACN,kGAAgG,cAAGA,WAAW,KAC/G,KAAQ,yDACL,+BAET,eAAIA,WAAW,UACb,eAAIA,WAAW,KACb,MAAS,OACR,uBAAYA,WAAW,MAAO,QACjC,eAAIA,WAAW,KACb,MAAS,MACN,iLAKb,eAAIA,WAAW,OACb,cAAGA,WAAW,MAAO,sDAAoD,uBAAYA,WAAW,KAAM,SAAsB,8HAA4H,uBAAYA,WAAW,KAAM,aAA0B,6DAA2D,uBAAYA,WAAW,KAAM,MAAmB,0CAG9Z,kBAAK,mEAAiE,uBAAYA,WAAW,KAAM,iBAA8B,oCACjI,eACE,GAAM,6CACH,iCAA+B,uBAAYA,WAAW,MAAO,mBAClE,kBAAK,0EAAwE,uBAAYA,WAAW,KAAM,4EAAyF,oBAAkB,uBAAYA,WAAW,KAAM,4DAAyE,yEAC3T,oBACE,eAAIA,WAAW,MAAO,iBAAe,uBAAYA,WAAW,MAAO,OAAoB,qBACvF,eAAIA,WAAW,MAAO,QAAM,uBAAYA,WAAW,MAAO,eAA4B,0BACtF,eAAIA,WAAW,MAAO,gBAAc,uBAAYA,WAAW,MAAO,QAAqB,cAAY,uBAAYA,WAAW,MAAO,QACjI,eAAIA,WAAW,MAAO,QAAM,uBAAYA,WAAW,MAAO,YAAyB,2CAErF,kBAAK,+DACL,qBAAK,iBAAMA,WAAW,MAClB,UAAa,gBACV,ymCAiCP,eACE,GAAM,gBACH,iBACL,kBAAK,QAAM,uBAAYA,WAAW,KAAM,uFAAoG,gGAA8F,uBAAYA,WAAW,KAAM,yBAAsC,SAAO,uBAAYA,WAAW,KAAM,2CAAwD,2DACzY,kBAAK,wFAAsF,uBAAYA,WAAW,KAAM,iBAA8B,0DAAwD,uBAAYA,WAAW,KAAM,cAA2B,6HAA2H,uBAAYA,WAAW,KAAM,kCAA+C,iFAA+E,uBAAYA,WAAW,KAAM,cAA2B,WACplB,qBAAK,iBAAMA,WAAW,MAClB,UAAa,iBACV,mUAKP,kBAAK,oBAAkB,uBAAYA,WAAW,KAAM,8BAA2C,gEAC/F,eACE,GAAM,qBACH,sBACL,oBACE,eAAIA,WAAW,OACb,cAAGA,WAAW,MAAO,qKAEvB,eAAIA,WAAW,OACb,cAAGA,WAAW,MAAO,+GAK7B,CAEAJ,EAAWK,gBAAiB,C","sources":["webpack://commerce-extensibility/./src/pages/events/conditional-events.md"],"sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsxRuntime classic */\n/* @jsx mdx */\nimport DefaultLayout from \"/home/runner/work/commerce-extensibility/commerce-extensibility/node_modules/@adobe/gatsby-theme-aio/src/components/MDXFilter/index.js\";\nexport const _frontmatter = {};\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <h1 {...{\n      \"id\": \"create-conditional-events\"\n    }}>{`Create conditional events`}</h1>\n    <p>{`You may decide that you want Adobe I/O Events for Adobe Commerce to notify the client application when certain conditions occur. For example, by default, if you register an event that tracks the remaining quantity of a product, the eventing service sends that information to your client application each time Commerce emits the event. However, you might be interested in the remaining quantity only when it reaches a specific threshold, such as 20 units. Conditional events allow you to define exactly when to send events to your application. Otherwise, the client application must include code to filter out the unimportant and unnecessary data.`}</p>\n    <p>{`A conditional event acts as an extension of a custom or native Commerce event. You must specify the source, or parent, event and define one or more rules that evaluate the data that is present in the parent event payload. If all the individual rules defined in a conditional event evaluate as true, then the eventing service sends the conditional event to the application. If one or more rules evaluate as false, the service sends neither the parent event nor the conditional event, unless the parent has been subscribed separately, without any rules.`}</p>\n    <p>{`All conditional events contain the following information:`}</p>\n    <ul>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`A unique name for the conditional event.`}</p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`The name of the parent event. You must attach a conditional event to a specific registered event.`}</p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`One or more rules.`}</p>\n      </li>\n    </ul>\n    <p>{`Each rule contains the following:`}</p>\n    <ul>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`A field that is defined in the parent event.`}</p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`An operator, which is represented as a comparison statement between the value supplied in the parent event's payload and the threshold value.`}</p>\n        <p parentName=\"li\">{`The operator must be one of the following:`}</p>\n        <table parentName=\"li\">\n          <thead parentName=\"table\">\n            <tr parentName=\"thead\">\n              <th parentName=\"tr\" {...{\n                \"align\": null\n              }}>{`Operator`}</th>\n              <th parentName=\"tr\" {...{\n                \"align\": null\n              }}>{`Description`}</th>\n            </tr>\n          </thead>\n          <tbody parentName=\"table\">\n            <tr parentName=\"tbody\">\n              <td parentName=\"tr\" {...{\n                \"align\": null\n              }}><inlineCode parentName=\"td\">{`greaterThan`}</inlineCode></td>\n              <td parentName=\"tr\" {...{\n                \"align\": null\n              }}>{`Checks whether the value supplied in the payload of the event is greater than a specified value. Applicable for integer and float data types.`}</td>\n            </tr>\n            <tr parentName=\"tbody\">\n              <td parentName=\"tr\" {...{\n                \"align\": null\n              }}><inlineCode parentName=\"td\">{`lessThan`}</inlineCode></td>\n              <td parentName=\"tr\" {...{\n                \"align\": null\n              }}>{`Checks whether the payload value is less than a specified value. Applicable for integer and float data types.`}</td>\n            </tr>\n            <tr parentName=\"tbody\">\n              <td parentName=\"tr\" {...{\n                \"align\": null\n              }}><inlineCode parentName=\"td\">{`equal`}</inlineCode></td>\n              <td parentName=\"tr\" {...{\n                \"align\": null\n              }}>{`Checks whether the payload value matches the specified value. For Boolean data types, use `}<inlineCode parentName=\"td\">{`1`}</inlineCode>{` to compare to `}<inlineCode parentName=\"td\">{`true`}</inlineCode>{` and `}<inlineCode parentName=\"td\">{`0`}</inlineCode>{` to compare to `}<inlineCode parentName=\"td\">{`false`}</inlineCode>{`.`}</td>\n            </tr>\n            <tr parentName=\"tbody\">\n              <td parentName=\"tr\" {...{\n                \"align\": null\n              }}><inlineCode parentName=\"td\">{`regex`}</inlineCode></td>\n              <td parentName=\"tr\" {...{\n                \"align\": null\n              }}>{`A regular expression that checks for matches. The specified value must be compatible with the `}<a parentName=\"td\" {...{\n                  \"href\": \"https://www.php.net/manual/en/function.preg-match.php\"\n                }}>{`regular expression match`}</a></td>\n            </tr>\n            <tr parentName=\"tbody\">\n              <td parentName=\"tr\" {...{\n                \"align\": null\n              }}><inlineCode parentName=\"td\">{`in`}</inlineCode></td>\n              <td parentName=\"tr\" {...{\n                \"align\": null\n              }}>{`Checks whether the payload value is one of multiple specified values. The value must be a comma-separated list. You do not need to provide additional escape characters.`}</td>\n            </tr>\n          </tbody>\n        </table>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`The value to compare against. When you assign the `}<inlineCode parentName=\"p\">{`regex`}</inlineCode>{` operator, you must delimit the regular expression value with valid characters, such as forward slashes (/). For example, `}<inlineCode parentName=\"p\">{`/^TV .*/i`}</inlineCode>{`, which checks whether the string starts with the string `}<inlineCode parentName=\"p\">{`TV`}</inlineCode>{`, ignoring the case of the letters.`}</p>\n      </li>\n    </ul>\n    <p>{`You can create conditional events within your module's or root `}<inlineCode parentName=\"p\">{`io_events.xml`}</inlineCode>{` file or from the command line.`}</p>\n    <h2 {...{\n      \"id\": \"define-conditional-events-in-io_eventsxml\"\n    }}>{`Define conditional events in `}<inlineCode parentName=\"h2\">{`io_events.xml`}</inlineCode></h2>\n    <p>{`The following example creates and registers a conditional event named `}<inlineCode parentName=\"p\">{`plugin.magento.catalog.model.resource_model.product.save_low_stock_event`}</inlineCode>{`. Its parent is `}<inlineCode parentName=\"p\">{`plugin.magento.catalog.model.resource_model.product.save`}</inlineCode>{`. It defines rules that trigger when all of the conditions are true:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`The value of `}<inlineCode parentName=\"li\">{`qty`}</inlineCode>{` is less than 20`}</li>\n      <li parentName=\"ul\">{`The `}<inlineCode parentName=\"li\">{`category_id`}</inlineCode>{` is either 3, 4, or 5`}</li>\n      <li parentName=\"ul\">{`The product `}<inlineCode parentName=\"li\">{`name`}</inlineCode>{` contains `}<inlineCode parentName=\"li\">{`TV`}</inlineCode></li>\n      <li parentName=\"ul\">{`The `}<inlineCode parentName=\"li\">{`store_id`}</inlineCode>{` of product category is either 1 or 2`}</li>\n    </ul>\n    <p>{`These fields are present and declared in the parent event.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-xml\"\n      }}>{`<config xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xsi:noNamespaceSchemaLocation=\"...\">\n    <event name=\"plugin.magento.catalog.model.resource_model.product.save_low_stock_event\"\n           parent=\"plugin.magento.catalog.model.resource_model.product.save\">\n        <fields>\n            <field name=\"qty\"/>\n            <field name=\"category_id\"/>\n            <field name=\"name\"/>\n        </fields>\n        <rules>\n            <rule>\n                <field>qty</field>\n                <operator>lessThan</operator>\n                <value>20</value>\n            </rule>\n            <rule>\n                <field>category_id</field>\n                <operator>in</operator>\n                <value>3,4,5</value>\n            </rule>\n            <rule>\n                <field>name</field>\n                <operator>regex</operator>\n                <value>/^TV .*/i</value>\n            </rule>\n           <rule>\n              <field>category.store_id</field>\n              <operator>in</operator>\n              <value>1,2</value>\n           </rule>\n        </rules>\n    </event>\n</config>\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"command-line\"\n    }}>{`Command line`}</h2>\n    <p>{`The `}<inlineCode parentName=\"p\">{`bin/magento events:subscribe <event_code> --force --fields=<name1> --fields=<name2>`}</inlineCode>{` command creates and registers custom and native Commerce events. When you also specify the `}<inlineCode parentName=\"p\">{`--parent <event_code>`}</inlineCode>{` and `}<inlineCode parentName=\"p\">{`--rules=<field-name>|<operator>|<value>`}</inlineCode>{` options, you create and register a conditional event.`}</p>\n    <p>{`The following command creates and registers the same conditional event shown in the `}<inlineCode parentName=\"p\">{`io_events.xml`}</inlineCode>{` example. Running the command also updates the system `}<inlineCode parentName=\"p\">{`config.php`}</inlineCode>{` file. If you need to subsequently update or delete the event subscription, you can manually update the event there. The `}<inlineCode parentName=\"p\">{`bin/magento events:unsubscribe`}</inlineCode>{` command unsubscribes the event, but it does not remove the command from the `}<inlineCode parentName=\"p\">{`config.php`}</inlineCode>{` file.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`bin/magento events:subscribe plugin.magento.catalog.model.resource_model.product.save_low_stock_event \\\\\n--parent plugin.magento.catalog.model.resource_model.product.save \\\\\n--fields=qty --fields=category_id --fields=name \\\\\n--rules=\"qty|lessThan|20\" --rules=\"category_id|in|3,4,5\" --rules=\"name|regex|/^TV .*/i\"\n`}</code></pre>\n    <p>{`You can use the `}<inlineCode parentName=\"p\">{`bin/magento events:list -v`}</inlineCode>{` command to display the contents of your subscribed events.`}</p>\n    <h2 {...{\n      \"id\": \"known-limitations\"\n    }}>{`Known limitations`}</h2>\n    <ul>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`Registering a plugin-type event rule causes the system to generate a plugin for the parent rule. No additional generation is required for observer-type events.`}</p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`Conditional events that evaluate as false are not stored in the database or sent to the eventing service.`}</p>\n      </li>\n    </ul>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"names":["_frontmatter","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","props","mdxType","parentName","isMDXComponent"],"sourceRoot":""}