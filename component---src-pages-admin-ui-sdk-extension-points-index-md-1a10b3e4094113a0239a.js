"use strict";(self.webpackChunkcommerce_extensibility=self.webpackChunkcommerce_extensibility||[]).push([[3585],{98937:function(e,n,t){t.r(n),t.d(n,{_frontmatter:function(){return m},default:function(){return p}});var a=t(58168),i=t(80045),o=(t(88763),t(15680)),s=t(83407);const r=["components"],m={},d={_frontmatter:m},l=s.A;function p(e){let{components:n}=e,t=(0,i.A)(e,r);return(0,o.mdx)(l,(0,a.A)({},d,t,{components:n,mdxType:"MDXLayout"}),(0,o.mdx)("h1",{id:"adobe-commerce-admin-ui-sdk-extension-points"},"Adobe Commerce Admin UI SDK extension points"),(0,o.mdx)("p",null,"This section describes how to use existing extension points in any Adobe Developer App Builder application that customizes Adobe Commerce Admin."),(0,o.mdx)("p",null,"The ",(0,o.mdx)("a",{parentName:"p",href:"https://github.com/adobe/adobe-commerce-samples/tree/main/admin-ui-sdk"},"Adobe Commerce Samples repository")," contains samples for different extension points of the Adobe Commerce Admin UI SDK. Use these samples to gain insight on how the Admin SDK injects menus and pages into the Admin."),(0,o.mdx)("h2",{id:"shared-contexts"},"Shared contexts"),(0,o.mdx)("p",null,"The ",(0,o.mdx)("inlineCode",{parentName:"p"},"sharedContext")," constant is available only when a mass action, menu, or order view button performs a redirection to an iFrame page. For mass actions, ",(0,o.mdx)("inlineCode",{parentName:"p"},"sharedContext")," contains a set of selected IDs, the Commerce base URL, the client ID, and an IMS token, as shown below. For menus and order view buttons, ",(0,o.mdx)("inlineCode",{parentName:"p"},"sharedContext")," contains only an IMS token."),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre",className:"language-js"},"const sharedContext = {\n  selectedIds: array,\n  commerceBaseUrl: string,\n  imsToken: string,\n  clientId: string\n}\n")),(0,o.mdx)("p",null,"In the following code example, the ",(0,o.mdx)("inlineCode",{parentName:"p"},"getGuestConnection()")," call uses a ",(0,o.mdx)("inlineCode",{parentName:"p"},"sharedContext")," to retrieve a list of selected IDs. The ",(0,o.mdx)("inlineCode",{parentName:"p"},"extensionId")," must match the ID used to register the app in the ",(0,o.mdx)("inlineCode",{parentName:"p"},"ExtensionRegistration.js")," file."),(0,o.mdx)("pre",null,(0,o.mdx)("code",{parentName:"pre",className:"language-js"},"const getGuestConnection = async () => {\n    return await attach({\n        id: extensionId\n   })\n}\n    \ngetGuestConnection().then((guestConnection) => {\n  guestConnection.sharedContext.get('selectedIds')\n})\n")),(0,o.mdx)("p",null,"The ",(0,o.mdx)("inlineCode",{parentName:"p"},"path")," parameter for a ",(0,o.mdx)("inlineCode",{parentName:"p"},"productMassAction")," specifies where to redirect the mass action UI."),(0,o.mdx)("h2",{id:"mass-actions-without-iframes"},"Mass actions without iFrames"),(0,o.mdx)("p",null,"When a mass action ",(0,o.mdx)("inlineCode",{parentName:"p"},"displayIframe")," parameter is set to ",(0,o.mdx)("inlineCode",{parentName:"p"},"false"),", you must account for additional factors."),(0,o.mdx)("h3",{id:"mass-action-request-headers"},"Mass action request headers"),(0,o.mdx)("p",null,"Use the following request headers when you perform a mass action without implementing an iFrame."),(0,o.mdx)("table",null,(0,o.mdx)("thead",{parentName:"table"},(0,o.mdx)("tr",{parentName:"thead"},(0,o.mdx)("th",{parentName:"tr",align:null},"Header"),(0,o.mdx)("th",{parentName:"tr",align:null},"Description"))),(0,o.mdx)("tbody",{parentName:"table"},(0,o.mdx)("tr",{parentName:"tbody"},(0,o.mdx)("td",{parentName:"tr",align:null},(0,o.mdx)("inlineCode",{parentName:"td"},"X-Request-ID")),(0,o.mdx)("td",{parentName:"tr",align:null},"A unique UUID v4 generated when the request is sent as a unique identifier.")),(0,o.mdx)("tr",{parentName:"tbody"},(0,o.mdx)("td",{parentName:"tr",align:null},(0,o.mdx)("inlineCode",{parentName:"td"},"Content-Type")),(0,o.mdx)("td",{parentName:"tr",align:null},"The request content type is ",(0,o.mdx)("inlineCode",{parentName:"td"},"application/json"),".")),(0,o.mdx)("tr",{parentName:"tbody"},(0,o.mdx)("td",{parentName:"tr",align:null},(0,o.mdx)("inlineCode",{parentName:"td"},"Accept")),(0,o.mdx)("td",{parentName:"tr",align:null},"The request accepts a response type of ",(0,o.mdx)("inlineCode",{parentName:"td"},"application/json"),".")),(0,o.mdx)("tr",{parentName:"tbody"},(0,o.mdx)("td",{parentName:"tr",align:null},(0,o.mdx)("inlineCode",{parentName:"td"},"Authorization")),(0,o.mdx)("td",{parentName:"tr",align:null},"The request is authenticated using an IMS token generated for the organization attached to the Commerce instance.")),(0,o.mdx)("tr",{parentName:"tbody"},(0,o.mdx)("td",{parentName:"tr",align:null},(0,o.mdx)("inlineCode",{parentName:"td"},"x-gw-ims-org-id")),(0,o.mdx)("td",{parentName:"tr",align:null},"The organization ID.")))),(0,o.mdx)("h3",{id:"application-failures"},"Application failures"),(0,o.mdx)("p",null,"Commerce expects application responses to contain the error status and message.\nCommerce logs the error and displays an error banner notification to the user."),(0,o.mdx)("h3",{id:"connection-interruption-failures"},"Connection interruption failures"),(0,o.mdx)("p",null,"By default, Commerce waits 10 seconds for a response, though the extension point can customize this value.\nWhen the timeout is reached, Commerce:"),(0,o.mdx)("ul",null,(0,o.mdx)("li",{parentName:"ul"},"Logs a 408 timeout status and error message."),(0,o.mdx)("li",{parentName:"ul"},"Displays an error banner notification."),(0,o.mdx)("li",{parentName:"ul"},"Sends the ",(0,o.mdx)("inlineCode",{parentName:"li"},"admin_ui_sdk_mass_action_request_failed")," event. The application can subscribe to this event to take action, such as rolling back updates in Commerce.")),(0,o.mdx)("p",null,"The application can access details of the failed request using the ",(0,o.mdx)("inlineCode",{parentName:"p"},"GET V1/adminuisdk/massaction/<requestId>")," REST API. The token used to authenticate the request must have access to the Admin UI SDK. The call returns an error message if the request ID was not found or if it associated with a successful action."),(0,o.mdx)("h3",{id:"recommendations"},"Recommendations"),(0,o.mdx)("ul",null,(0,o.mdx)("li",{parentName:"ul"},"Use bulk update in Commerce to avoid inconsistency issues in case of failures."),(0,o.mdx)("li",{parentName:"ul"},"Event and REST API responses contain the list of selected IDs for a request. It is the application's responsibility to monitor updates or failures in Commerce.")))}p.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-admin-ui-sdk-extension-points-index-md-1a10b3e4094113a0239a.js.map