{"version":3,"file":"component---src-pages-webhooks-conditional-webhooks-md-fc4fe55eaa1dec019f7f.js","mappings":"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","sources":["webpack://commerce-extensibility/./src/pages/webhooks/conditional-webhooks.md"],"sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsxRuntime classic */\n/* @jsx mdx */\nimport DefaultLayout from \"/home/runner/work/commerce-extensibility/commerce-extensibility/node_modules/@adobe/gatsby-theme-aio/src/components/MDXFilter/index.js\";\nexport const _frontmatter = {};\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <h1 {...{\n      \"id\": \"create-conditional-webhooks\"\n    }}>{`Create conditional webhooks`}</h1>\n    <p>{`You may decide that you want to trigger a webhook only if its payload meets certain conditions. For example, you could decide to calculate taxes using a third-party service for specific postal codes only. If the postal code provided in the payload does not match the selected postal code, there is no value in triggering the webhook.`}</p>\n    <p>{`A conditional webhook can significantly reduce the number of API calls, which reduces the waiting time for clients.`}</p>\n    <p>{`Conditional webhooks can have one or more rules. Each rule contains the following:`}</p>\n    <ul>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`The field to be evaluated. For nested fields, use the dot-separated format, such as `}<inlineCode parentName=\"p\">{`data.order.product.id`}</inlineCode>{`.`}</p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`An operator, which is represented as a comparison statement between the value supplied in the webhook payload and the threshold value.`}</p>\n        <p parentName=\"li\">{`The operator must be one of the following:`}</p>\n        <table parentName=\"li\">\n          <thead parentName=\"table\">\n            <tr parentName=\"thead\">\n              <th parentName=\"tr\" {...{\n                \"align\": null\n              }}>{`Operator`}</th>\n              <th parentName=\"tr\" {...{\n                \"align\": null\n              }}>{`Description`}</th>\n            </tr>\n          </thead>\n          <tbody parentName=\"table\">\n            <tr parentName=\"tbody\">\n              <td parentName=\"tr\" {...{\n                \"align\": null\n              }}><inlineCode parentName=\"td\">{`greaterThan`}</inlineCode></td>\n              <td parentName=\"tr\" {...{\n                \"align\": null\n              }}>{`Checks whether the value supplied in the payload of the webhook is greater than a specified value. Applicable for integer and float data types.`}</td>\n            </tr>\n            <tr parentName=\"tbody\">\n              <td parentName=\"tr\" {...{\n                \"align\": null\n              }}><inlineCode parentName=\"td\">{`lessThan`}</inlineCode></td>\n              <td parentName=\"tr\" {...{\n                \"align\": null\n              }}>{`Checks whether the payload value is less than a specified value. Applicable for integer and float data types.`}</td>\n            </tr>\n            <tr parentName=\"tbody\">\n              <td parentName=\"tr\" {...{\n                \"align\": null\n              }}><inlineCode parentName=\"td\">{`equal`}</inlineCode></td>\n              <td parentName=\"tr\" {...{\n                \"align\": null\n              }}>{`Checks whether the payload value matches the specified value. For Boolean data types, use `}<inlineCode parentName=\"td\">{`1`}</inlineCode>{` to compare to `}<inlineCode parentName=\"td\">{`true`}</inlineCode>{` and `}<inlineCode parentName=\"td\">{`0`}</inlineCode>{` to compare to `}<inlineCode parentName=\"td\">{`false`}</inlineCode>{`.`}</td>\n            </tr>\n            <tr parentName=\"tbody\">\n              <td parentName=\"tr\" {...{\n                \"align\": null\n              }}><inlineCode parentName=\"td\">{`notEqual`}</inlineCode></td>\n              <td parentName=\"tr\" {...{\n                \"align\": null\n              }}>{`Checks whether the payload value does not match the specified value.`}</td>\n            </tr>\n            <tr parentName=\"tbody\">\n              <td parentName=\"tr\" {...{\n                \"align\": null\n              }}><inlineCode parentName=\"td\">{`regex`}</inlineCode></td>\n              <td parentName=\"tr\" {...{\n                \"align\": null\n              }}>{`A regular expression that checks for matches. The specified value must be compatible with the `}<a parentName=\"td\" {...{\n                  \"href\": \"https://www.php.net/manual/en/function.preg-match.php\"\n                }}>{`regular expression match`}</a>{`.`}</td>\n            </tr>\n            <tr parentName=\"tbody\">\n              <td parentName=\"tr\" {...{\n                \"align\": null\n              }}><inlineCode parentName=\"td\">{`in`}</inlineCode></td>\n              <td parentName=\"tr\" {...{\n                \"align\": null\n              }}>{`Checks whether the payload value is one of multiple specified values. The value must be a comma-separated list. You do not need to provide additional escape characters.`}</td>\n            </tr>\n            <tr parentName=\"tbody\">\n              <td parentName=\"tr\" {...{\n                \"align\": null\n              }}><inlineCode parentName=\"td\">{`isEmpty`}</inlineCode></td>\n              <td parentName=\"tr\" {...{\n                \"align\": null\n              }}>{`Checks whether the payload value is empty.`}</td>\n            </tr>\n            <tr parentName=\"tbody\">\n              <td parentName=\"tr\" {...{\n                \"align\": null\n              }}><inlineCode parentName=\"td\">{`notEmpty`}</inlineCode></td>\n              <td parentName=\"tr\" {...{\n                \"align\": null\n              }}>{`Checks whether the payload value is not empty.`}</td>\n            </tr>\n          </tbody>\n        </table>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`The value to compare against. When you assign the `}<inlineCode parentName=\"p\">{`regex`}</inlineCode>{` operator, you must delimit the regular expression value with valid characters, such as forward slashes (/). For example, `}<inlineCode parentName=\"p\">{`/^TV .*/i`}</inlineCode>{`, which checks whether the string starts with `}<inlineCode parentName=\"p\">{`TV`}</inlineCode>{`, ignoring the case of the letters.`}</p>\n      </li>\n    </ul>\n    <h2 {...{\n      \"id\": \"define-conditional-webhooks-in-webhooksxml\"\n    }}>{`Define conditional webhooks in `}<inlineCode parentName=\"h2\">{`webhooks.xml`}</inlineCode></h2>\n    <p>{`The following example creates and registers a conditional webhook for the event `}<inlineCode parentName=\"p\">{`plugin.magento.tax.api.tax_calculation.calculate_tax`}</inlineCode>{`. The webhook will be only triggered when all of the conditions are true:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`The value of `}<inlineCode parentName=\"li\">{`quoteDetails.shipping_address.country_id`}</inlineCode>{` must be equal to `}<inlineCode parentName=\"li\">{`US`}</inlineCode>{`.`}</li>\n      <li parentName=\"ul\">{`The `}<inlineCode parentName=\"li\">{`quoteDetails.billing_address.postcode`}</inlineCode>{` must begin with `}<inlineCode parentName=\"li\">{`123`}</inlineCode>{`.`}</li>\n    </ul>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-xml\"\n      }}>{`<method name=\"plugin.magento.tax.api.tax_calculation.calculate_tax\" type=\"after\">\n   <hooks>\n      <batch name=\"Order_Updates\">\n         <hook name=\"update_order\" url=\"{env:APP_URL}/calculate-taxes\" method=\"POST\" timeout=\"5000\" softTimeout=\"1000\" priority=\"300\" required=\"false\" fallbackErrorMessage=\"The taxes can not be calculated\">\n            <fields>\n               <field name=\"quoteDetails\" />\n               <field name=\"storeId\" />\n            </fields>\n            <rules>\n               <rule field=\"quoteDetails.shipping_address.country_id\" operator=\"equal\" value=\"US\" />\n               <rule field=\"quoteDetails.billing_address.postcode\" operator=\"regex\" value=\"/^123/\" />\n            </rules>\n         </hook>\n      </batch>\n   </hooks>\n</method>\n`}</code></pre>\n    <p>{`The following example sends a webhook to a third-party service when the product short description is empty. The service generates the text for the description. The webhook returns the operation with information to update the product short description. As a result, the webhook will not be triggered again for the same product.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-xml\"\n      }}>{`       <method name=\"observer.catalog_product_save_before\" type=\"before\">\n       <hooks>\n           <batch name =\"Product_Updates\">\n               <hook name=\"generate_description\" url=\"{env:APP_URL}/generate-product-description\" timeout=\"5000\" softTimeout=\"1000\" priority=\"300\" required=\"true\" fallbackErrorMessage=\"The product could not be updated\">\n                   <fields>\n                       <field name=\"product.name\" source=\"data.product.name\" />\n                       <field name=\"product.category_ids\" source=\"data.product.category_ids\" />\n                       <field name=\"product.sku\" source=\"data.product.sku\" />\n                   </fields>\n                   <rules>\n                       <rule field=\"product.short_description\" operation=\"isEmpty\" />\n                   </rules>\n               </hook>\n           </batch>\n       </hooks>\n   </method>\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"command-line\"\n    }}>{`Command line`}</h2>\n    <p>{`You can use the `}<inlineCode parentName=\"p\">{`bin/magento webhooks:list`}</inlineCode>{` command to display the contents of your subscribed webhooks, including rules information.`}</p>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"names":["_frontmatter","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","props","mdxType","parentName","isMDXComponent"],"sourceRoot":""}