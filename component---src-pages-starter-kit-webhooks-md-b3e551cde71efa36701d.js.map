{"version":3,"file":"component---src-pages-starter-kit-webhooks-md-b3e551cde71efa36701d.js","mappings":"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","sources":["webpack://commerce-extensibility/./src/pages/starter-kit/webhooks.md"],"sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsxRuntime classic */\n/* @jsx mdx */\nimport DefaultLayout from \"/home/runner/work/commerce-extensibility/commerce-extensibility/node_modules/@adobe/gatsby-theme-aio/src/components/MDXFilter/index.js\";\nimport actions from '/src/_includes/actions.md';\nexport const _frontmatter = {};\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n  return <div {...props} />;\n};\nconst CodeBlock = makeShortcode(\"CodeBlock\");\nconst InlineAlert = makeShortcode(\"InlineAlert\");\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n\n    <h1 {...{\n      \"id\": \"real-time-integrations\"\n    }}>{`Real-time integrations`}</h1>\n    <p>{`The following sections demonstrate all the real-time integrations that Adobe Commerce Extensibility Integration Kit has to offer, including the synchronous webhook action and an example implementation of a webhook.`}</p>\n    <h2 {...{\n      \"id\": \"synchronous-webhook-action\"\n    }}>{`Synchronous webhook action`}</h2>\n    <actions />\n    <p>{`The contents of the `}<inlineCode parentName=\"p\">{`./actions/webhook`}</inlineCode>{` directory expose a webhook that can be invoked synchronously from Commerce to affect the behavior of a particular business flow.`}</p>\n    <p>{`The `}<inlineCode parentName=\"p\">{`./actions/webhook/check-stock`}</inlineCode>{` folder provides a `}<a parentName=\"p\" {...{\n        \"href\": \"#webhooks-example\"\n      }}>{`reference implementation`}</a>{` of a synchronous webhook action.`}</p>\n    <p>{`To get the URL of the webhook, run the following command:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`aio runtime action get webhook/check-stock --url\n`}</code></pre>\n    <p>{`By default, `}<inlineCode parentName=\"p\">{`synchronous webhook`}</inlineCode>{` actions have the following response:`}</p>\n    <CodeBlock slots=\"heading, code\" repeat=\"2\" languages=\"javascript, javascript\" mdxType=\"CodeBlock\" />\n    <h3 {...{\n      \"id\": \"success\"\n    }}>{`Success`}</h3>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-js\"\n      }}>{`// ./actions/responses.js#webhookSuccessResponse\nreturn {\n  statusCode: 200,\n  body: {\n    op: 'success'\n  }\n}\n`}</code></pre>\n    <h3 {...{\n      \"id\": \"failure\"\n    }}>{`Failure`}</h3>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-js\"\n      }}>{`// ./actions/responses.js#webhookSuccessResponse\nreturn {\n  error: {\n    statusCode: 200,\n    body : {\n      op: 'exception'\n      message: 'YOUR ERROR MESSAGE'\n    }\n  }\n}\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"webhooks-example\"\n    }}>{`Webhooks example`}</h2>\n    <p>{`The Adobe Commerce integration starter kit can use the `}<a parentName=\"p\" {...{\n        \"href\": \"../webhooks/\"\n      }}>{`Adobe Commerce webhook module`}</a>{` to allow intercepting flows in Adobe Commerce.`}</p>\n    <p>{`This reference implementation makes a real-time query to a third-party system to determine whether the product a shopper placed in their cart is in stock.`}</p>\n    <InlineAlert variant=\"info\" slots=\"text\" mdxType=\"InlineAlert\" />\n    <p>{`If you do not want to implement webhooks, comment out the `}<inlineCode parentName=\"p\">{`webhook`}</inlineCode>{` section of the starter kit's `}<inlineCode parentName=\"p\">{`app.config.yaml`}</inlineCode>{` file before running `}<inlineCode parentName=\"p\">{`aio app deploy`}</inlineCode>{`.`}</p>\n    <p>{`Webhooks are enabled by default. If you initially disabled webhooks, you can reenable them by uncommenting the `}<inlineCode parentName=\"p\">{`webhook`}</inlineCode>{` section of the `}<inlineCode parentName=\"p\">{`app.config.yaml`}</inlineCode>{` file. Additionally, you will need to redeploy the project and repeat the `}<a parentName=\"p\" {...{\n        \"href\": \"./create-integration.md#onboarding\"\n      }}>{`onboarding process`}</a>{`.`}</p>\n    <p>{`The runtime action included is in the starter kit package in the following location:`}</p>\n    <ul>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`actions/webhook/check-stock/index.js`}</inlineCode></li>\n    </ul>\n    <InlineAlert variant=\"info\" slots=\"text\" mdxType=\"InlineAlert\" />\n    <p>{`You must implement the stock-checking logic on an external service.`}</p>\n    <h3 {...{\n      \"id\": \"configure-webhook\"\n    }}>{`Configure webhook`}</h3>\n    <InlineAlert variant=\"info\" slots=\"text\" mdxType=\"InlineAlert\" />\n    <p>{`Creating a webhook in the Admin configuration is temporarily disabled, due to changes in `}<a parentName=\"p\" {...{\n        \"href\": \"../webhooks/release-notes.md#version-150\"\n      }}>{`Webhooks`}</a>{`. Instead, `}<a parentName=\"p\" {...{\n        \"href\": \"../webhooks/hooks.md\"\n      }}>{`create a webhook from an `}<inlineCode parentName=\"a\">{`xml`}</inlineCode>{` file`}</a>{`.`}</p>\n    <p>{`Follow admin configuration to modify your webhook and define the connection between Adobe Commerce and your backoffice system using the `}<inlineCode parentName=\"p\">{`observer.checkout_cart_product_add_before`}</inlineCode>{` method.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-json\"\n      }}>{`{\n  \"data\": {\n    \"cart_id\": \"cart id\",\n    \"items\": [\n      {\n        \"item_id\": 1,\n        \"sku\": \"Product SKU\",\n        \"qty\": \"Cart item qty\"\n      }\n    ]\n  }\n}\n`}</code></pre>\n    <h3 {...{\n      \"id\": \"validation\"\n    }}>{`Validation`}</h3>\n    <p>{`The following parameters are required:`}</p>\n    <ul>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`data`}</inlineCode></li>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`data.cart_id`}</inlineCode></li>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`data.items`}</inlineCode></li>\n    </ul>\n    <p>{`Sample validation logic is provided in the following location in the starter kit package.`}</p>\n    <ul>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`webhook\\\\check-stock\\\\validator.js`}</inlineCode></li>\n    </ul>\n    <p>{`You can modify this file to add more validations to the `}<inlineCode parentName=\"p\">{`validateData`}</inlineCode>{` method, if necessary.`}</p>\n    <h4 {...{\n      \"id\": \"business-logic\"\n    }}>{`Business logic`}</h4>\n    <p>{`The example runtime action `}<inlineCode parentName=\"p\">{`webhook\\\\check-stock\\\\index.js`}</inlineCode>{` references the `}<inlineCode parentName=\"p\">{`checkAvailableStock()`}</inlineCode>{` method in the `}<inlineCode parentName=\"p\">{`webhook\\\\check-stock\\\\stock.js`}</inlineCode>{` file. You must add custom business logic to the `}<inlineCode parentName=\"p\">{`params`}</inlineCode>{` in the `}<inlineCode parentName=\"p\">{`stock.js`}</inlineCode>{` file to test authentication with your third-party backoffice system.`}</p>\n    <p>{`You can also add custom responses.`}</p>\n    <h3 {...{\n      \"id\": \"modify-env-parameters\"\n    }}>{`Modify `}<inlineCode parentName=\"h3\">{`.env`}</inlineCode>{` parameters`}</h3>\n    <p>{`You can access any environment parameters from `}<inlineCode parentName=\"p\">{`params`}</inlineCode>{`. Add any required parameters to the `}<inlineCode parentName=\"p\">{`actions/webhook/check-stock/actions.config.yaml`}</inlineCode>{` under `}<inlineCode parentName=\"p\">{`check-stock -> inputs`}</inlineCode>{`:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-yaml\"\n      }}>{`check-stock:\n  function: check-stock/index.js\n  web: 'yes'\n  runtime: nodejs:16\n  inputs:\n    LOG_LEVEL: debug\n    \n    HERE_YOUR_PARAM: $YOUR_CUSTOM_PARAMETER\n    \n  annotations:\n    require-adobe-auth: false\n    final: true\n`}</code></pre>\n    <h3 {...{\n      \"id\": \"responses\"\n    }}>{`Responses`}</h3>\n    <p>{`Error response:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-javascript\"\n      }}>{`return {   \n  statusCode: 200,\n  body: {\n    op: 'exception',\n    message: 'Error message'\n  }\n}\n`}</code></pre>\n    <p>{`Success response:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-javascript\"\n      }}>{`return {\n  statusCode: 200,\n  body: {\n    op: 'success'\n  }\n}\n`}</code></pre>\n    <InlineAlert variant=\"info\" slots=\"text\" mdxType=\"InlineAlert\" />\n    <p>{`These responses are defined in `}<inlineCode parentName=\"p\">{`webhook\\\\check-stock\\\\index.js`}</inlineCode>{` and are adapted from the `}<a parentName=\"p\" {...{\n        \"href\": \"../webhooks/responses.md#responses\"\n      }}>{`Commerce webhook responses`}</a>{`. You can modify the response implementation in your code as needed.`}</p>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"names":["_frontmatter","makeShortcode","name","props","console","warn","CodeBlock","InlineAlert","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","mdxType","parentName","slots","repeat","languages","variant","isMDXComponent"],"sourceRoot":""}